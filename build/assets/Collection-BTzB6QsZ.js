import{i as R}from"./Presence-1QBXfxcP.js";import{r as f,q as v,p as $,n as b,d as p,j as h,b1 as j,G as d,i as k}from"./app-DbhAseKL.js";import{S as E}from"./Primitive-Cyv5IaP_.js";import{e as w}from"./index-BhSOTNk0.js";function _(e){const a=R({dir:f("ltr")});return v(()=>{var o;return(e==null?void 0:e.value)||((o=a.dir)==null?void 0:o.value)||"ltr"})}function C(){const e=f(),a=v(()=>{var o,s;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(s=e.value)==null?void 0:s.$el.nextElementSibling:w(e)});return{primitiveElement:e,currentElement:a}}const M="data-reka-collection-item";function q(e={}){const{key:a="",isProvider:o=!1}=e,s=`${a}CollectionProvider`;let t;if(o){const r=f(new Map);t={collectionRef:f(),itemMap:r},$(s,t)}else t=b(s);const x=(r=!1)=>{const n=t.collectionRef.value;if(!n)return[];const l=Array.from(n.querySelectorAll(`[${M}]`)),i=Array.from(t.itemMap.value.values()).sort((m,u)=>l.indexOf(m.ref)-l.indexOf(u.ref));return r?i:i.filter(m=>m.ref.dataset.disabled!=="")},A=p({name:"CollectionSlot",setup(r,{slots:n}){const{primitiveElement:l,currentElement:c}=C();return k(c,()=>{t.collectionRef.value=c.value}),()=>d(E,{ref:l},n)}}),y=p({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(r,{slots:n,attrs:l}){const{primitiveElement:c,currentElement:i}=C();return h(m=>{if(i.value){const u=j(i.value);t.itemMap.value.set(u,{ref:i.value,value:r.value}),m(()=>t.itemMap.value.delete(u))}}),()=>d(E,{...l,[M]:"",ref:c},n)}}),S=v(()=>Array.from(t.itemMap.value.values())),I=v(()=>t.itemMap.value.size);return{getItems:x,reactiveItems:S,itemMapSize:I,CollectionSlot:A,CollectionItem:y}}export{q as a,C as b,_ as u};
