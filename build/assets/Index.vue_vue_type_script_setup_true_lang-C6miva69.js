import{d as x,t as K,q as R,y as v,o as n,w as r,m as S,z as I,u as e,K as F,I as M,J as z,b as l,x as U,a as D,f as H,r as q,H as L,h as O,c as f,C as m,e as g,F as k,B as $,D as w}from"./app-cAtTxNmn.js";import{a as A,_ as J}from"./CardContent.vue_vue_type_script_setup_true_lang-BxPaZtjU.js";import{_ as G}from"./CardDescription.vue_vue_type_script_setup_true_lang-BcIMAhCM.js";import{_ as Q,a as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-qjmkegBO.js";import{_ as X,a as Y,b as Z,c as N,d as ee}from"./SelectValue.vue_vue_type_script_setup_true_lang-BksfK6mk.js";import{_ as ae,a as se}from"./SelectLabel.vue_vue_type_script_setup_true_lang-Tilw7FPG.js";import{_ as te}from"./index-CIq7__vP.js";import{a as re}from"./Presence-Bx5YoEz3.js";import{c as oe}from"./createContext-DxuuEVYa.js";import{u as le}from"./useFormControl-WobrOCdn.js";import{u as T}from"./useForwardExpose-CIuDtJXm.js";import{P as E}from"./Primitive-D3UVglao.js";import{V as de}from"./VisuallyHiddenInput-BMnR5WIg.js";import{a as ie}from"./index-BnkX3gY3.js";import{c as C}from"./utils-B2uM22MF.js";import{r as ne}from"./index-BiVhXwjY.js";import{_ as B}from"./Label.vue_vue_type_script_setup_true_lang-yC4APMCF.js";import{t as P}from"./index-C6K_9UZa.js";const[ue,ce]=oe("SwitchRoot");var me=x({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(b,{emit:c}){const o=b,d=c,{disabled:t}=K(o),i=ie(o,"modelValue",d,{defaultValue:o.defaultValue,passive:o.modelValue===void 0});function p(){t.value||(i.value=!i.value)}const{forwardRef:y,currentElement:h}=T(),u=le(h),s=R(()=>{var a;return o.id&&h.value?(a=document.querySelector(`[for="${o.id}"]`))==null?void 0:a.innerText:void 0});return ce({modelValue:i,toggleCheck:p,disabled:t}),(a,V)=>(n(),v(e(E),F(a.$attrs,{id:a.id,ref:e(y),role:"switch",type:a.as==="button"?"button":void 0,value:a.value,"aria-label":a.$attrs["aria-label"]||s.value,"aria-checked":e(i),"aria-required":a.required,"data-state":e(i)?"checked":"unchecked","data-disabled":e(t)?"":void 0,"as-child":a.asChild,as:a.as,disabled:e(t),onClick:p,onKeydown:M(z(p,["prevent"]),["enter"])}),{default:r(()=>[S(a.$slots,"default",{modelValue:e(i)}),e(u)&&a.name?(n(),v(e(de),{key:0,type:"checkbox",name:a.name,disabled:e(t),required:a.required,value:a.value,checked:!!e(i)},null,8,["name","disabled","required","value","checked"])):I("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),pe=me,fe=x({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(b){const c=ue();return T(),(o,d)=>{var t;return n(),v(e(E),{"data-state":(t=e(c).modelValue)!=null&&t.value?"checked":"unchecked","data-disabled":e(c).disabled.value?"":void 0,"as-child":o.asChild,as:o.as},{default:r(()=>[S(o.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),ge=fe;const _e=x({__name:"Switch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{type:[String,Object,Function]},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(b,{emit:c}){const o=b,d=c,t=ne(o,"class"),i=re(t,d);return(p,y)=>(n(),v(e(pe),F({"data-slot":"switch"},e(i),{class:e(C)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",o.class)}),{default:r(()=>[l(e(ge),{"data-slot":"switch-thumb",class:U(e(C)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"))},{default:r(()=>[S(p.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}}),be={class:"flex flex-col md:flex-row md:items-center gap-4"},ve={key:0,class:"grid gap-8"},ye={class:"text-lg font-semibold capitalize text-gray-700 dark:text-gray-200 flex items-center"},he={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},ke={class:"text-xs text-gray-500 dark:text-gray-400"},we={class:"sticky bottom-4 flex justify-end"},xe={key:1,class:""},He=x({__name:"Index",setup(b){const c=D(),o=H({roles:c.props.roles,permissions:c.props.permissions,groupedPermissions:c.props.groupedPermissions,assignedPermissions:c.props.assignedPermissions}),d=q(),t=q([]),i=L({permissions:[]}),p=R(()=>i.processing),y=()=>{d.value&&(i.permissions=t.value,i.post(route("roles.permissions.update",d.value.id),{onSuccess:u=>{P.success(`Successfully updated permissions for '${d.value}'.`),console.log(u)},onError:()=>P.error(`Failed to update permissions for '${d.value}'.`)}))},h=(u,s)=>{console.log(s),s?t.value.includes(u)||(t.value.push(u),console.log(u)):t.value=t.value.filter(a=>a!==u)};return O(d,u=>{if(u){const s=o.assignedPermissions[u.name]||[];t.value=[...s]}else t.value=[]}),(u,s)=>(n(),f(k,null,[s[8]||(s[8]=m(" sdsd ")),l(e(J),{class:"border-0"},{default:r(()=>[l(e(Q),{class:"text-center6 border-b border-gray-200 dark:border-gray-700"},{default:r(()=>[l(e(W),{class:"text-3xl font-body font-semibold border-0"},{default:r(()=>s[1]||(s[1]=[m(" Accessibility ")])),_:1,__:[1]}),l(e(G),{class:"text-muted-foreground"},{default:r(()=>s[2]||(s[2]=[m(" Manage what each role can access across the system. ")])),_:1,__:[2]})]),_:1}),l(e(A),{class:"space-y-8 pt-3"},{default:r(()=>[g("div",be,[l(e(B),{htmlFor:"role-select",class:"text-base font-semibold text-gray-700 dark:text-gray-300"},{default:r(()=>s[3]||(s[3]=[m(" Select a Role ")])),_:1,__:[3]}),l(e(X),{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a)},{default:r(()=>[l(e(Y),{class:"w-full md:w-[240px] bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg"},{default:r(()=>[l(e(Z),{placeholder:"Choose a role"})]),_:1}),l(e(N),{class:"bg-white dark:bg-gray-700 rounded-lg shadow-lg"},{default:r(()=>[l(e(ae),null,{default:r(()=>[l(e(se),null,{default:r(()=>s[4]||(s[4]=[m("Roles")])),_:1,__:[4]}),(n(!0),f(k,null,$(o.roles,a=>(n(),v(e(ee),{key:a.id,value:a,class:"capitalize"},{default:r(()=>[m(w(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),d.value?(n(),f("div",ve,[(n(!0),f(k,null,$(o.groupedPermissions,(a,V)=>(n(),f("div",{key:V,class:"space-y-3"},[g("h3",ye,[s[5]||(s[5]=g("span",{class:"w-2 h-2 rounded-full bg-accent mr-2"},null,-1)),m(" "+w(V),1)]),g("div",he,[(n(!0),f(k,null,$(a,_=>(n(),f("div",{key:_.id,class:"flex flex-row items-center justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-xl border border-transparent hover:border-woosoo-primary-light transition"},[g("div",null,[l(e(B),{for:`permission-${_.id}`,class:"text-sm font-medium text-gray-700 dark:text-gray-200 capitalize"},{default:r(()=>[m(w(_.label),1)]),_:2},1032,["for"]),g("p",ke,w(_.guard_name),1)]),l(e(_e),{id:`permission-${_.id}`,"model-value":t.value.includes(_.name),"onUpdate:modelValue":j=>h(_.name,j),disabled:p.value,class:"scale-110"},null,8,["id","model-value","onUpdate:modelValue","disabled"])]))),128))])]))),128)),g("div",we,[l(e(te),{onClick:z(y,["prevent"]),disabled:p.value,variant:"default",class:"px-6 py-3 rounded cursor-pointer border-1 border-woosoo-accent bg-woosoo-primary-light hover:bg-woosoo-primary-dark hover:text-woosoo-white transition"},{default:r(()=>s[6]||(s[6]=[m(" Save Changes ")])),_:1,__:[6]},8,["disabled"])])])):(n(),f("div",xe,s[7]||(s[7]=[g("p",{class:""}," Please select a role to manage its permissions.",-1)])))]),_:1})]),_:1})],64))}});export{He as _};
