import{c as B}from"./createContext-CAhNy-JF.js";import{u as h,a as x}from"./Collection-BTzB6QsZ.js";import{P as G}from"./Primitive-Cyv5IaP_.js";import{f as O,E as P,a as k}from"./utils-CC-pqV_U.js";import{a as w}from"./index-BhSOTNk0.js";import{d as M,t as N,r as c,y as V,b as $,w as F,e as A,u,m as D}from"./app-DbhAseKL.js";const[Q,U]=B("RovingFocusGroup");var j=M({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(b,{expose:g,emit:S}){const a=b,p=S,{loop:y,orientation:f,dir:I}=N(a),v=h(I),i=w(a,"currentTabStopId",p,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),s=c(!1),n=c(!1),l=c(0),{getItems:m,CollectionSlot:T}=x({isProvider:!0});function C(e){const o=!n.value;if(e.currentTarget&&e.target===e.currentTarget&&o&&!s.value){const r=new CustomEvent(P,k);if(e.currentTarget.dispatchEvent(r),p("entryFocus",r),!r.defaultPrevented){const d=m().map(t=>t.ref).filter(t=>t.dataset.disabled!==""),_=d.find(t=>t.getAttribute("data-active")===""),E=d.find(t=>t.id===i.value),q=[_,E,...d].filter(Boolean);O(q,a.preventScrollOnEntryFocus)}}n.value=!1}function R(){setTimeout(()=>{n.value=!1},1)}return g({getItems:m}),U({loop:y,dir:v,orientation:f,currentTabStopId:i,onItemFocus:e=>{i.value=e},onItemShiftTab:()=>{s.value=!0},onFocusableItemAdd:()=>{l.value++},onFocusableItemRemove:()=>{l.value--}}),(e,o)=>($(),V(u(T),null,{default:F(()=>[A(u(G),{tabindex:s.value||l.value===0?-1:0,"data-orientation":u(f),as:e.as,"as-child":e.asChild,dir:u(v),style:{outline:"none"},onMousedown:o[0]||(o[0]=r=>n.value=!0),onMouseup:R,onFocus:C,onBlur:o[1]||(o[1]=r=>s.value=!1)},{default:F(()=>[D(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),W=j;export{W as R,Q as i};
