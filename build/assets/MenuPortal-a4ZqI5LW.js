import{b as te,P as oe,D as re,a as ne,c as se,T as ae}from"./PopperContent-BO5fK46L.js";import{d as C,y as b,b as _,w as y,m as h,T as k,U as X,u as r,r as q,o as ie,t as W,b2 as ue,i as le,l as de,e as T,K as N,J as pe}from"./app-DbhAseKL.js";import{a as E,P as fe}from"./Presence-1QBXfxcP.js";import{c as U}from"./createContext-CAhNy-JF.js";import{u as ce}from"./Collection-BTzB6QsZ.js";import{c as G,a as ye}from"./index-BhSOTNk0.js";import{j as ge}from"./index-CfbkxBOr.js";import{u as H}from"./useForwardExpose-DXHmXuPU.js";import{u as me,F as qe,a as ve}from"./FocusScope-xoeLEIVo.js";import{g as be}from"./getActiveElement-FUKBWQwh.js";import{a as _e,u as he}from"./useTypeahead-yG0m5nrE.js";import{g as we,i as Ce,F as Me,L as Be,f as Oe,a as Pe}from"./utils-DNyje9Vd.js";import{R as Fe}from"./RovingFocusGroup-BsrxKcUg.js";const Se=["INPUT","TEXTAREA"];function De(t,u,l,a={}){if(!u||a.enableIgnoredElement&&Se.includes(u.nodeName))return null;const{arrowKeyOptions:d="both",attributeName:i="[data-reka-collection-item]",itemsArray:p=[],loop:n=!0,dir:c="ltr",preventScroll:g=!0,focus:f=!1}=a,[S,M,A,B,O,D]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],P=A||B,v=S||M;if(!O&&!D&&(!P&&!v||d==="vertical"&&v||d==="horizontal"&&P))return null;const F=l?Array.from(l.querySelectorAll(i)):p;if(!F.length)return null;g&&t.preventDefault();let m=null;return v||P?m=V(F,u,{goForward:P?B:c==="ltr"?S:M,loop:n}):O?m=F.at(0)||null:D&&(m=F.at(-1)||null),f&&(m==null||m.focus()),m}function V(t,u,l,a=t.length){if(--a===0)return null;const d=t.indexOf(u),i=l.goForward?d+1:d-1;if(!l.loop&&(i<0||i>=t.length))return null;const p=(i+t.length)%t.length,n=t[p];return n?n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false"?V(t,n,l,a):n:null}var Ae=C({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const u=t;return(l,a)=>(_(),b(r(te),k(X(u)),{default:y(()=>[h(l.$slots,"default")]),_:3},16))}}),nt=Ae;function Re(){const t=q(!1);return ie(()=>{G("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),G(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const ke=ge(Re),[I,Ne]=U(["MenuRoot","MenuSub"],"MenuContext"),[Y,Ie]=U("MenuRoot");var Ke=C({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:u}){const l=t,a=u,{modal:d,dir:i}=W(l),p=ce(i),n=ye(l,"open",a),c=q(),g=ke();return Ne({open:n,onOpenChange:f=>{n.value=f},content:c,onContentChange:f=>{c.value=f}}),Ie({onClose:()=>{n.value=!1},isUsingKeyboardRef:g,dir:p,modal:d}),(f,S)=>(_(),b(r(oe),null,{default:y(()=>[h(f.$slots,"default")]),_:3}))}}),st=Ke;const[at,Te]=U("MenuContent");var Ee=C({__name:"MenuContentImpl",props:ue({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...se}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:u}){const l=t,a=u,d=I(),i=Y(),{trapFocus:p,disableOutsidePointerEvents:n,loop:c}=W(l);_e(),me(n.value);const g=q(""),f=q(0),S=q(0),M=q(null),A=q("right"),B=q(0),O=q(null),D=q(),{forwardRef:P,currentElement:v}=H(),{handleTypeaheadSearch:F}=he();le(v,e=>{d.onContentChange(e)}),de(()=>{window.clearTimeout(f.value)});function m(e){var s,w;return A.value===((s=M.value)==null?void 0:s.side)&&Ce(e,(w=M.value)==null?void 0:w.area)}async function L(e){var o;a("openAutoFocus",e),!e.defaultPrevented&&(e.preventDefault(),(o=v.value)==null||o.focus({preventScroll:!0}))}function x(e){var j;if(e.defaultPrevented)return;const s=e.target.closest("[data-reka-menu-content]")===e.currentTarget,w=e.ctrlKey||e.altKey||e.metaKey,K=e.key.length===1,R=De(e,be(),v.value,{loop:c.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(R)return R==null?void 0:R.focus();if(e.code==="Space")return;const $=((j=D.value)==null?void 0:j.getItems())??[];if(s&&(e.key==="Tab"&&e.preventDefault(),!w&&K&&F(e.key,$)),e.target!==v.value||!Me.includes(e.key))return;e.preventDefault();const z=[...$.map(ee=>ee.ref)];Be.includes(e.key)&&z.reverse(),Oe(z)}function Q(e){var o,s;(s=(o=e==null?void 0:e.currentTarget)==null?void 0:o.contains)!=null&&s.call(o,e.target)||(window.clearTimeout(f.value),g.value="")}function Z(e){var w;if(!Pe(e))return;const o=e.target,s=B.value!==e.clientX;if((w=e==null?void 0:e.currentTarget)!=null&&w.contains(o)&&s){const K=e.clientX>B.value?"right":"left";A.value=K,B.value=e.clientX}}return Te({onItemEnter:e=>!!m(e),onItemLeave:e=>{var o;m(e)||((o=v.value)==null||o.focus(),O.value=null)},onTriggerLeave:e=>!!m(e),searchRef:g,pointerGraceTimerRef:S,onPointerGraceIntentChange:e=>{M.value=e}}),(e,o)=>(_(),b(r(qe),{"as-child":"",trapped:r(p),onMountAutoFocus:L,onUnmountAutoFocus:o[7]||(o[7]=s=>a("closeAutoFocus",s))},{default:y(()=>[T(r(re),{"as-child":"","disable-outside-pointer-events":r(n),onEscapeKeyDown:o[2]||(o[2]=s=>a("escapeKeyDown",s)),onPointerDownOutside:o[3]||(o[3]=s=>a("pointerDownOutside",s)),onFocusOutside:o[4]||(o[4]=s=>a("focusOutside",s)),onInteractOutside:o[5]||(o[5]=s=>a("interactOutside",s)),onDismiss:o[6]||(o[6]=s=>a("dismiss"))},{default:y(()=>[T(r(Fe),{ref_key:"rovingFocusGroupRef",ref:D,"current-tab-stop-id":O.value,"onUpdate:currentTabStopId":o[0]||(o[0]=s=>O.value=s),"as-child":"",orientation:"vertical",dir:r(i).dir.value,loop:r(c),onEntryFocus:o[1]||(o[1]=s=>{a("entryFocus",s),r(i).isUsingKeyboardRef.value||s.preventDefault()})},{default:y(()=>[T(r(ne),{ref:r(P),role:"menu",as:e.as,"as-child":e.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":r(we)(r(d).open.value),dir:r(i).dir.value,side:e.side,"side-offset":e.sideOffset,align:e.align,"align-offset":e.alignOffset,"avoid-collisions":e.avoidCollisions,"collision-boundary":e.collisionBoundary,"collision-padding":e.collisionPadding,"arrow-padding":e.arrowPadding,"prioritize-position":e.prioritizePosition,"position-strategy":e.positionStrategy,"update-position-strategy":e.updatePositionStrategy,sticky:e.sticky,"hide-when-detached":e.hideWhenDetached,reference:e.reference,onKeydown:x,onBlur:Q,onPointermove:Z},{default:y(()=>[h(e.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),J=Ee,Ue=C({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:u}){const l=t,a=u,d=E(l,a),i=I(),{forwardRef:p,currentElement:n}=H();return ve(n),(c,g)=>(_(),b(J,N(r(d),{ref:r(p),"trap-focus":r(i).open.value,"disable-outside-pointer-events":r(i).open.value,"disable-outside-scroll":!0,onDismiss:g[0]||(g[0]=f=>r(i).onOpenChange(!1)),onFocusOutside:g[1]||(g[1]=pe(f=>a("focusOutside",f),["prevent"]))}),{default:y(()=>[h(c.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Le=Ue,$e=C({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:u}){const d=E(t,u),i=I();return(p,n)=>(_(),b(J,N(r(d),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:n[0]||(n[0]=c=>r(i).onOpenChange(!1))}),{default:y(()=>[h(p.$slots,"default")]),_:3},16))}}),ze=$e,je=C({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:u}){const d=E(t,u),i=I(),p=Y();return(n,c)=>(_(),b(r(fe),{present:n.forceMount||r(i).open.value},{default:y(()=>[r(p).modal.value?(_(),b(Le,k(N({key:0},{...n.$attrs,...r(d)})),{default:y(()=>[h(n.$slots,"default")]),_:3},16)):(_(),b(ze,k(N({key:1},{...n.$attrs,...r(d)})),{default:y(()=>[h(n.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),it=je,Ge=C({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const u=t;return(l,a)=>(_(),b(r(ae),k(X(u)),{default:y(()=>[h(l.$slots,"default")]),_:3},16))}}),ut=Ge;export{st as M,it as a,ut as b,nt as c,Y as d,at as i};
