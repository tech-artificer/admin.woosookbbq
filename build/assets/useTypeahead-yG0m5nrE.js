import{f as y,a as g}from"./index-CfbkxBOr.js";import{j as v}from"./app-DbhAseKL.js";import{g as A}from"./getActiveElement-FUKBWQwh.js";let f=0;function w(){v(e=>{if(!y)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??x()),document.body.insertAdjacentElement("beforeend",t[1]??x()),f++,e(()=>{f===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(a=>a.remove()),f--})})}function x(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}function S(e){const t=g("",1e3);return{search:t,handleTypeaheadSearch:(c,i)=>{t.value=t.value+c;{const s=A(),l=i.map(n=>{var m,p;return{...n,textValue:((m=n.value)==null?void 0:m.textValue)??((p=n.ref.textContent)==null?void 0:p.trim())??""}}),r=l.find(n=>n.ref===s),o=l.map(n=>n.textValue),h=E(o,t.value,r==null?void 0:r.textValue),u=l.find(n=>n.textValue===h);return u&&u.ref.focus(),u==null?void 0:u.ref}},resetTypeahead:()=>{t.value=""}}}function b(e,t){return e.map((a,d)=>e[(t+d)%e.length])}function E(e,t,a){const c=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=a?e.indexOf(a):-1;let s=b(e,Math.max(i,0));c.length===1&&(s=s.filter(o=>o!==a));const r=s.find(o=>o.toLowerCase().startsWith(c.toLowerCase()));return r!==a?r:void 0}export{w as a,S as u,b as w};
