import{d as D,r as d,H as L,j as M,y as O,o as p,w as a,b as t,u as e,e as i,c as v,z as h,C as m,D as y,J as R}from"./app-cAtTxNmn.js";import{_ as c}from"./index-CIq7__vP.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-B8aWFyVE.js";import{_ as N}from"./InputError.vue_vue_type_script_setup_true_lang-JW-TTyQC.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-yC4APMCF.js";import{t as b}from"./index-C6K_9UZa.js";import{_ as x,a as w,b as k}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BaLd1OzG.js";import{_ as $}from"./TooltipProvider.vue_vue_type_script_setup_true_lang-Cy5EAqPu.js";import{_ as I,a as F,b as W,c as P,d as T,e as z,f as A}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CzfYHBhC.js";import{c as H}from"./createLucideIcon-5NNNzDu3.js";import{P as J}from"./pencil-DNfYNh-8.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Primitive-D3UVglao.js";import"./utils-B2uM22MF.js";import"./index-D5UchP3m.js";import"./index-BnkX3gY3.js";import"./index-BiVhXwjY.js";import"./useForwardExpose-CIuDtJXm.js";import"./Presence-Bx5YoEz3.js";import"./createContext-DxuuEVYa.js";import"./PopperContent-CJVz1WH5.js";import"./VisuallyHidden-MU-j1igr.js";import"./x-DzZy8kG7.js";import"./FocusScope-C-7cFVP4.js";import"./getActiveElement-FUKBWQwh.js";import"./utils-DNyje9Vd.js";import"./DialogTrigger-D4_mexEH.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=H("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),K={class:"flex justify-start mb-5"},Q={key:0,class:"flex justify-center"},X=["src"],Y={class:"grid gap-2"},Z=["value"],ee={class:"flex items-center justify-between gap-2 flex-row-reverse mt-5"},te=D({__name:"Edit",props:{menu:{}},setup(C){const l=C,u=d(!1),s=d(l.menu.img_url),f=d([l.menu]),r=L({image:null}),j=()=>{u.value=!0};function U(_){var g;const o=_.target;if(!o||!((g=o.files)!=null&&g.length))return;const n=o.files[0];try{s.value=URL.createObjectURL(n),f.value[0].img_url=s.value}catch(S){console.error("Error while handling file change",S)}}function E(){r.post(route("menu.upload.image",{id:l.menu.id}),{forceFormData:!0,preserveScroll:!0,preserveState:!0,onSuccess:()=>{b("Image Uploaded:",{description:"The previous image has been replaced with your new upload.",action:{label:"Ok",variant:"success",onClick:()=>console.log("Ok")},duration:5e3,position:"top-right"}),u.value=!1},onError:()=>{b("An Error Occured",{description:"Something Went Wrong!",duration:5e3,position:"top-right"}),f.value[0].img_url=l.menu.img_url}})}return M(()=>()=>{s.value&&s.value.startsWith("blob:")&&URL.revokeObjectURL(s.value)}),(_,o)=>(p(),O(e(A),{open:u.value,"onUpdate:open":o[1]||(o[1]=n=>u.value=n)},{default:a(()=>[t(e($),{"delay-duration":100},{default:a(()=>[t(e(x),{class:""},{default:a(()=>[t(e(w),{"as-child":""},{default:a(()=>[t(e(I),{"as-child":""},{default:a(()=>[t(e(c),{variant:"ghost",class:"cursor-pointer",onClick:j},{default:a(()=>[t(e(G))]),_:1})]),_:1})]),_:1}),t(e(k),null,{default:a(()=>o[2]||(o[2]=[i("p",null,"Upload/Replace Image",-1)])),_:1,__:[2]})]),_:1})]),_:1}),t(e($),{"delay-duration":100},{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(w),{"as-child":""},{default:a(()=>[t(e(I),{"as-child":""},{default:a(()=>[t(e(c),{variant:"ghost",class:"cursor-pointer"},{default:a(()=>[t(e(J))]),_:1})]),_:1})]),_:1}),t(e(k),null,{default:a(()=>o[3]||(o[3]=[i("p",null,"Edit Menu",-1)])),_:1,__:[3]})]),_:1})]),_:1}),t(e(F),{class:"sm:max-w-[600px]"},{default:a(()=>[t(e(W),{class:"flex flex-col gap-2 justify-start"},{default:a(()=>[i("div",K,[s.value?(p(),v("div",Q,[i("img",{src:s.value,class:"w-32 h-32 object-cover border rounded-lg",alt:"Menu Image"},null,8,X)])):h("",!0)]),t(e(P),null,{default:a(()=>[m(y(l.menu.name),1)]),_:1}),t(e(T),null,{default:a(()=>o[4]||(o[4]=[m(" Upload or replace the featured image for this menu item. ")])),_:1,__:[4]})]),_:1}),i("form",{onSubmit:R(E,["prevent"]),method:"put",class:"space-y-4"},[i("div",Y,[t(e(V),{for:"image",class:"text-woosoo-dark-gray"},{default:a(()=>o[5]||(o[5]=[m("Featured Image")])),_:1,__:[5]}),t(e(B),{id:"image",type:"file","v-model":e(r).image,accept:"image/*",onChange:U,onInput:o[0]||(o[0]=n=>e(r).image=n.target.files[0])},null,8,["v-model"]),e(r).progress?(p(),v("progress",{key:0,value:e(r).progress.percentage,max:"100"},y(e(r).progress.percentage)+"% ",9,Z)):h("",!0),t(N,{message:e(r).errors.image},null,8,["message"])]),i("div",ee,[t(e(c),{type:"submit",class:"hover:bg-woosoo-primary-light hover:text-woosoo-primary-dark bg-woosoo-accent cursor-pointer text-gray-100 w-50",disabled:e(r).processing},{default:a(()=>o[6]||(o[6]=[m(" Save Changes ")])),_:1,__:[6]},8,["disabled"]),t(e(z),{"as-child":""},{default:a(()=>[t(e(c),{type:"button",variant:"secondary",class:"cursor-pointer w-50"},{default:a(()=>o[7]||(o[7]=[m(" Close ")])),_:1,__:[7]})]),_:1})])],32)]),_:1})]),_:1},8,["open"]))}}),Ee=q(te,[["__scopeId","data-v-d455323c"]]);export{Ee as default};
